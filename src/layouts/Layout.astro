---
import "../styles/global.css";
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";

const { title = "" } = Astro.props;
const pageTitle = title && title !== "Home" ? `Rod Monk · ${title}` : "Rod Monk";

// Seeded PRNG for deterministic layout across renders
let seed = 20250224;
const rand = () => {
  seed = (seed * 1664525 + 1013904223) & 0x7fffffff;
  return seed / 0x7fffffff;
};

const equations = [
  // Algebra & geometry (Math 9–10)
  "x² + y² = r²",
  "y = mx + b",
  "a² + b² = c²",
  "A = πr²",
  "C = 2πr",
  "m = (y₂−y₁)/(x₂−x₁)",
  "d = √((x₂−x₁)²+(y₂−y₁)²)",
  "(a+b)² = a²+2ab+b²",
  "(a+b)(a−b) = a²−b²",
  "V = ⁴⁄₃πr³",
  // Quadratic (Math 10–11)
  "x = (−b±√(b²−4ac))/2a",
  "y = a(x−h)² + k",
  "Δ = b²−4ac",
  // Trigonometry (Math 11–12)
  "sin²θ + cos²θ = 1",
  "tan θ = sin θ/cos θ",
  "sin(A+B) = sinA cosB + cosA sinB",
  "cos(2θ) = cos²θ − sin²θ",
  "sin(2θ) = 2 sinθ cosθ",
  "a/sin A = b/sin B",
  "c² = a²+b²−2ab cosC",
  "1 + tan²θ = sec²θ",
  // Exponentials & logs (Math 12)
  "logₐ(xy) = logₐx + logₐy",
  "logₐ(x/y) = logₐx − logₐy",
  "logₐ(xⁿ) = n logₐx",
  "logₐx = ln x/ln a",
  "y = Aeᵏˣ",
  // Sequences & series (Math 11–12)
  "aₙ = a₁ + (n−1)d",
  "Sₙ = n/2(a₁+aₙ)",
  "aₙ = a₁·rⁿ⁻¹",
  "S∞ = a₁/(1−r), |r|<1",
  "∑ᵢ₌₁ⁿ i = n(n+1)/2",
  "∑ᵢ₌₁ⁿ i² = n(n+1)(2n+1)/6",
  // Statistics (Math 11–12)
  "P(A∪B) = P(A)+P(B)−P(A∩B)",
  "P(A|B) = P(A∩B)/P(B)",
  "z = (x−μ)/σ",
  "x̄ = Σxᵢ/n",
  "nCr = n!/(r!(n−r)!)",
  "nPr = n!/(n−r)!",
  // Limits & calculus (Pre-calc / Calculus 12)
  "lim(x→0) sinx/x = 1",
  "lim(x→∞)(1+1/x)ˣ = e",
  "f′(x) = lim(h→0)[f(x+h)−f(x)]/h",
  "d/dx[xⁿ] = nxⁿ⁻¹",
  "d/dx[sin x] = cos x",
  "d/dx[cos x] = −sin x",
  "d/dx[eˣ] = eˣ",
  "d/dx[ln x] = 1/x",
  "d/dx[f·g] = f′g + fg′",
  "d/dx[f/g] = (f′g−fg′)/g²",
  "d/dx[f(g(x))] = f′(g(x))·g′(x)",
  "∫xⁿ dx = xⁿ⁺¹/(n+1) + C",
  "∫eˣ dx = eˣ + C",
  "∫sin x dx = −cos x + C",
  "∫cos x dx = sin x + C",
  "∫1/x dx = ln|x| + C",
  "∫ₐᵇ f(x) dx = F(b)−F(a)",
  "e^(iπ) + 1 = 0",
  "∑ₙ₌₁^∞ 1/n² = π²/6",
];

const items = Array.from({ length: 350 }, () => ({
  sym:     equations[Math.floor(rand() * equations.length)],
  top:     parseFloat((rand() * 100).toFixed(2)),
  left:    parseFloat((rand() * 100).toFixed(2)),
  size:    Math.floor(rand() * 10) + 11,              // 11–20px
  opacity: parseFloat((rand() * 0.20 + 0.25).toFixed(3)), // 0.25–0.45
  rotate:  Math.floor(rand() * 41) - 20,              // −20° to +20°
}));
---

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{pageTitle}</title>
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@600;700&display=swap" rel="stylesheet" />
<slot name="head" />
</head>

<body class="min-h-screen text-slate-900">

<div class="math-background" aria-hidden="true">
  {items.map(({ sym, top, left, size, opacity, rotate }) => (
    <span
      class="math-sym"
      style={`top:${top}%;left:${left}%;font-size:${size}px;opacity:${opacity};transform:rotate(${rotate}deg)`}
    >{sym}</span>
  ))}
</div>

<header class="border-b border-blue-900 bg-blue-800">
<div class="mx-auto flex max-w-5xl items-center justify-between px-4 py-5">

<div>
<div class="text-xl font-bold text-white">
<a href="/" class="hover:text-blue-200">
Rod Monk
</a>
</div>

<div class="text-sm text-blue-200">
Math &amp; Computer Studies · Senior High School
</div>
</div>

<Nav />

</div>
</header>

<main class="mx-auto max-w-5xl px-4 py-10">
<slot />
</main>

<Footer />

</body>
</html>
