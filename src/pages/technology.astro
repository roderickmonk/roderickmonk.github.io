---
import Layout from "../layouts/Layout.astro";

const equations = [
  {
    label: "Euler's Identity",
    src:   "e^{i\\pi} + 1 = 0",
  },
  {
    label: "Quadratic Formula",
    src:   "x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}",
  },
  {
    label: "Basel Problem",
    src:   "\\sum_{n=1}^{\\infty} \\frac{1}{n^2} = \\frac{\\pi^2}{6}",
  },
  {
    label: "Fundamental Theorem of Calculus",
    src:   "\\frac{d}{dx}\\int_a^x f(t)\\,dt = f(x)",
  },
  {
    label: "Normal Distribution",
    src:   "f(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}}\\, e^{-\\frac{1}{2}\\left(\\frac{x-\\mu}{\\sigma}\\right)^2}",
  },
];
---

<Layout title="Technology">

  <Fragment slot="head">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" />
    <script is:inline>
      function initKatex() {
        renderMathInElement(document.body, {
          delimiters: [
            { left: "\\[", right: "\\]", display: true  },
            { left: "\\(", right: "\\)", display: false },
          ],
          throwOnError: false,
        });
      }
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" onload="initKatex()"></script>
    <script is:inline>
      function initP5() {
        new p5(function(p) {
          var phase = 0;
          var W = 440, H = 286;
          p.setup = function() {
            var cnv = p.createCanvas(W, H);
            cnv.parent('p5-canvas');
            cnv.style('max-width', '100%');
            cnv.style('height', 'auto');
          };
          p.draw = function() {
            p.background(15, 23, 42);
            p.noFill();
            p.strokeWeight(1.5);
            var N = 500, a = 3, b = 4;
            for (var i = 1; i < N; i++) {
              var t0 = (i - 1) / N * p.TWO_PI;
              var t1 = i / N * p.TWO_PI;
              var x0 = W/2 + 190 * p.sin(a * t0 + phase);
              var y0 = H/2 + 120 * p.sin(b * t0);
              var x1 = W/2 + 190 * p.sin(a * t1 + phase);
              var y1 = H/2 + 120 * p.sin(b * t1);
              p.stroke(
                p.lerp(56,  168, i/N),
                p.lerp(189,  85, i/N),
                p.lerp(248, 247, i/N),
                p.lerp(80,  255, i/N)
              );
              p.line(x0, y0, x1, y1);
            }
            phase += 0.008;
          };
        });
      }
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/p5@1.11.2/lib/p5.min.js" onload="initP5()"></script>
    <script is:inline>
      function initGGB() {
        var ggbApp = new GGBApplet({
          appName: "graphing",
          width: 440,
          height: 286,
          showToolBar: false,
          showAlgebraInput: false,
          showMenuBar: false,
          enableRightClick: false,
          showResetIcon: false,
          appletOnLoad: function(api) {
            api.setCoordSystem(-1.7, 1.7, -1.7, 1.7);
            // Slider[min, max, increment, speed, width, isAngle, isHorizontal, isAnimating, isRandom]
            api.evalCommand("n = Slider[1, 8, 0.5, 0.3, 150, false, true, true, false]");
            api.evalCommand("c = Curve[cos(n*t)*cos(t), cos(n*t)*sin(t), t, 0, 2*pi]");
            api.setColor("c", 30, 64, 175);
            api.evalCommand("SetLineThickness[c, 4]");
            api.setVisible("n", false);
            api.evalCommand("StartAnimation[]");
          }
        }, true);
        ggbApp.inject("ggb-element");
      }
    </script>
    <script defer src="https://www.geogebra.org/apps/deployggb.js" onload="initGGB()"></script>
  </Fragment>

  <div class="space-y-6">

    <!-- Page header — always on top -->
    <div class="rounded-2xl border border-slate-200 bg-white p-8 shadow-sm">
      <h1 class="text-3xl font-bold mb-2">Technology</h1>
      <p class="text-slate-500 text-sm">Tools and environments used in the classroom.</p>
    </div>

    <!-- Swappable sections -->
    <div id="tech-swap" class="space-y-6">

      <!-- Desmos + Scratch -->
      <div class="rounded-2xl border border-slate-200 border-t-4 border-t-blue-600 bg-white p-8 shadow-sm">
        <div class="grid gap-8 md:grid-cols-2">

          <div>
            <h2 class="text-lg font-semibold mb-1">Desmos</h2>
            <p class="text-slate-500 text-sm mb-4">An intuitive graphing calculator for visualizing functions, transformations, and mathematical ideas.</p>
            <div class="relative w-full border rounded-lg overflow-hidden" style="padding-bottom: 75%;">
              <iframe
                src="https://www.desmos.com/calculator/k4jzw3ujpd?embed"
                title="Desmos Graphing Calculator"
                class="absolute inset-0 w-full h-full border-0"></iframe>
            </div>
            <p class="mt-3 text-sm text-slate-600">
              <a href="https://www.desmos.com" class="text-blue-700 hover:underline">desmos.com</a>
            </p>
          </div>

          <div>
            <h2 class="text-lg font-semibold mb-1">Scratch</h2>
            <p class="text-slate-500 text-sm mb-4">Block-based programming from MIT — a powerful environment for learning logic, events, and creative problem solving.</p>
            <div class="rounded-lg overflow-hidden border border-slate-200">
              <img
                src="/scratch-editor.png"
                alt="Scratch 3.0 editor showing block-based programming interface"
                class="w-full h-auto"
              />
            </div>
            <p class="mt-3 text-sm text-slate-600">
              <a href="https://scratch.mit.edu" class="text-blue-700 hover:underline">scratch.mit.edu</a>
            </p>
          </div>

        </div>
      </div>

      <!-- LaTeX showcase -->
      <div class="rounded-2xl border border-slate-200 border-t-4 border-t-blue-600 bg-white p-8 shadow-sm">

        <h2 class="text-2xl font-bold mb-2">Mathematical Typesetting with LaTeX</h2>
        <p class="text-slate-500 text-sm mb-8">
          LaTeX is the professional standard for mathematical writing — used in research papers, textbooks, and academic publishing worldwide.
          Each expression below shows the source on the left and the typeset result on the right.
        </p>

        <div class="grid grid-cols-2 gap-6 mb-3 px-1">
          <p class="text-xs font-semibold uppercase tracking-widest text-slate-400">LaTeX Source</p>
          <p class="text-xs font-semibold uppercase tracking-widest text-slate-400">Rendered</p>
        </div>

        <div class="divide-y divide-slate-100">
          {equations.map(eq => (
            <div class="grid grid-cols-2 gap-6 items-center py-5">
              <div>
                <p class="text-xs text-slate-400 mb-2">{eq.label}</p>
                <pre class="bg-slate-900 text-emerald-400 rounded-lg p-4 text-xs font-mono overflow-x-auto whitespace-pre-wrap" set:text={eq.src}></pre>
              </div>
              <div class="flex items-center justify-center min-h-14 text-xl" set:html={`\\[${eq.src}\\]`}></div>
            </div>
          ))}
        </div>

      </div>

      <!-- p5.js -->
      <div class="rounded-2xl border border-slate-200 border-t-4 border-t-blue-600 bg-white p-8 shadow-sm">
        <div class="grid gap-8 md:grid-cols-2">

          <div>
            <h2 class="text-lg font-semibold mb-1">p5.js</h2>
            <p class="text-slate-500 text-sm mb-4">A JavaScript library for creative coding — bringing mathematical ideas to life through interactive graphics, animations, and simulations. The live animation traces a Lissajous curve (3:4 ratio), the same family of curves produced by an oscilloscope.</p>
            <p class="text-sm text-slate-600">
              <a href="https://p5js.org" class="text-blue-700 hover:underline">p5js.org</a>
            </p>
          </div>

          <div id="p5-canvas" class="rounded-lg overflow-hidden border border-slate-200"></div>

        </div>
      </div>

      <!-- GeoGebra -->
      <div class="rounded-2xl border border-slate-200 border-t-4 border-t-blue-600 bg-white p-8 shadow-sm">
        <div class="grid gap-8 md:grid-cols-2">

          <div>
            <h2 class="text-lg font-semibold mb-1">GeoGebra</h2>
            <p class="text-slate-500 text-sm mb-4">Dynamic mathematics software combining geometry, algebra, and calculus in one interactive environment. The live animation shows a polar rose curve r = cos(nθ) as n varies continuously — changing the number of petals in real time.</p>
            <p class="text-sm text-slate-600">
              <a href="https://www.geogebra.org" class="text-blue-700 hover:underline">geogebra.org</a>
            </p>
          </div>

          <div id="ggb-element" class="rounded-lg overflow-hidden border border-slate-200"></div>

        </div>
      </div>

    </div><!-- end #tech-swap -->

  </div>

  <script is:inline>
    (function () {
      var container = document.getElementById("tech-swap");
      if (!container) return;

      container.style.transition = "opacity 0.4s ease";

      var timer = setInterval(function () {
        container.style.opacity = "0";
        setTimeout(function () {
          container.appendChild(container.firstElementChild);
          container.style.opacity = "1";
        }, 400);
      }, 5000);

      container.addEventListener("click", function () {
        clearInterval(timer);
      }, { once: true });
    })();
  </script>

</Layout>
